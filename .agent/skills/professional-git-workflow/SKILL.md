---
name: professional-git-workflow
description: Enforces a strict Feature Branch -> Firebase Preview -> Merge workflow with explicit Agent/User responsibilities.
---

# Professional Git Workflow

This workflow enforces a "Black Belt" CI/CD pipeline. It clearly defines who does what to ensure code is verified in a live Preview environment before reaching production.

## ğŸ­ Roles & Responsibilities

### ğŸ¤– AGENT (You)
- **Creates Branches**: Always starts work on a new `feat/` or `fix/` branch.
- **Implements Code**: Writes, refactors, and builds the code.
- **Pushes Changes**: Syncs local changes to the remote repository.
- **Opens PRs**: Uses GitHub CLI to open Pull Requests immediately after pushing.

### ğŸ‘¤ USER (The Client)
- **Reviews Previews**: Tests the temporary "Firebase Preview URL" generated by the PR.
- **Requests Changes**: Provides feedback if the preview functionality is incorrect.
- **Merges**: Clicks the "Merge" button in GitHub once satisfied (triggering deployments).

---

## ğŸ“ The Workflow

### 1. START (ğŸ¤– Agent)
Before writing code, create and switch to a focused branch.
```bash
git checkout -b feat/your-descriptive-feature-name
```

### 2. WORK (ğŸ¤– Agent)
- Implement changes.
- Verify locally (e.g., `npm run build`).

### 3. PUBLISH (ğŸ¤– Agent)
Push the code and **immediately open a PR**.
```bash
git add .
git commit -m "feat: description of changes"
git push -u origin feat/your-feature-name
gh pr create --title "feat: Feature Name" --body "Implemented feature X."
```

### 4. HANDOVER (ğŸ¤– Agent)
- **Wait for CI**: Monitor the GitHub Action until the Firebase Preview URL is generated.
- **Provide Link**: Always provide the **Direct Preview URL** (found in the PR comments) and the **PR URL** to the user.
```bash
gh pr view --json comments --template '{{range .comments}}{{if contains .body "Preview"}}{{.body}}{{end}}{{end}}'
```

### 5. TEST (ğŸ‘¤ User)
- Click the provided **Preview URL** and test the feature live.
- Review the PR code if necessary.

### 6. FINISH (ğŸ‘¤ User)
- If the preview works: **Merge** the PR into `main`.
- If issues found: Tell the Agent. The Agent will fix and push updates to the same branch.

---

## ğŸš« Critical Rules
1.  **NEVER Commit to Main**: `main` is for production code only.
2.  **Verify via Preview**: Do not rely solely on "it works on my machine". The Firebase Preview is the source of truth.
3.  **Always Link**: The Agent MUST provide a clickable link to the preview page in the handover message.
